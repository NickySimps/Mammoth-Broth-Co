<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mammoth Broth Co. - Preorders</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Underdog&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Cave Painting Decorations -->
    <div class="cave-painting" style="background-image: url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><path d=%22M50 10 C 20 20, 20 80, 50 90 M50 10 C 80 20, 80 80, 50 90 M20 50 C 30 40, 70 40, 80 50%22 stroke=%22%23A0937D%22 stroke-width=%222%22 fill=%22none%22 stroke-linecap=%22round%22/></svg>'); top: 10%; left: 5%; width: 150px; height: 150px; transform: rotate(-15deg);"></div>
    <div class="cave-painting" style="background-image: url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><path d=%22M30 70 Q 50 90, 70 70 M30 70 L 20 40 L 30 45 M70 70 L 80 40 L 70 45 M40 50 L 60 50 M50 50 L 50 30 M45 30 L 55 30%22 stroke=%22%23A0937D%22 stroke-width=%222%22 fill=%22none%22 stroke-linecap=%22round%22/></svg>'); top: 20%; right: 8%; width: 120px; height: 120px;"></div>

    <header>
        <h1 class="font-caveman" style="font-size: 3rem; margin-top: 20px;">Mammoth Broth Co.</h1>
        <p>Primal Nourishment, Delivered Weekly</p>
        <nav>
            <a href="/index.html">Pre-Order</a>
            <a href="/about.html">Our Story</a>
            <a href="/contact.html">Contact</a>
        </nav>
    </header>

    <main id="app" class="container">
        <section id="products-section">
            <h2 class="font-caveman">The Hunt's Bounty</h2>
            <div id="product-list" class="product-grid">
            </div>
        </section>

        <section id="order-section" class="panel-primitive">
            <h2 class="font-caveman">Your Cart</h2>
            <form id="order-form">
                <div id="cart-summary">  
                    <p>Your cart is empty. The hunt awaits!</p>
                </div>
                <div id="cart-total" class="cart-total"></div>

                <label for="market-select">Pickup Location:</label>
                <select id="market-select" class="input-primitive" required></select>

                <label for="customer-name">Your Name:</label>
                <input type="text" id="customer-name" class="input-primitive" required>

                <label for="customer-email">Your Email:</label>
                <input type="email" id="customer-email" class="input-primitive" required>

                <h3 class="font-caveman">Payment</h3>
                <div id="payment-element"></div>
                <button id="checkout-button" type="submit" class="btn-primitive font-caveman" disabled>Pay Now</button>
                <button id="pay-at-pickup-button" type="button" class="btn-primitive font-caveman">Pay at Pickup</button>
                <button id="clear-cart-button" type="button" class="btn-primitive font-caveman">Clear Cart</button>
                <div id="payment-message" class="hidden"></div>
            </form>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Mammoth Broth Co. All rights reserved by the tribe.</p>
    </footer>

    <!-- Stripe.js -->
    <script src="https://js.stripe.com/v3/"></script>

    <!-- Your App's Scripts -->
    <!-- Firebase services are now imported as modules in the JS files -->
    <script src="effects.js"></script>
    <script type="module" src="app.js"></script>

    <!-- Confirmation Modal -->
    <div id="confirmationModal" class="modal">
      <div class="modal-content">
        <span class="close-button">&times;</span>
        <h2>Order Confirmed!</h2>
        <p>Your preorder has been successfully placed.</p>
        <p>Your reference ID is: <strong id="orderNumber"></strong></p>
        <p>You will receive a confirmation email shortly with your official order number.</p>
      </div>
    </div>
</body>
</html>